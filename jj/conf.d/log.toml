"$schema" = "https://jj-vcs.github.io/jj/prerelease/config-schema.json"

[template-aliases]
'format_timestamp(timestamp)' = 'timestamp.ago()'
'format_short_change_id(id)' = 'id.shortest()' # ++ id.shortest(8).rest().substr(0, 1)'
'format_short_commit_id(id)' = ''

'format_commit_empty_text(commit)' = '''
  if(empty,
    if(!commit.contained_in("merges()"), label("empty", "(empty)"))
  )
'''

'format_commit_description(commit)' = '''
  if(description,
    description.first_line(),
    label(if(empty, "empty"), description_placeholder),
  )
'''

'format_short_change_id_with_hidden_and_divergent_info(commit)' = '''
if(commit.hidden(),
  label("hidden",
    format_short_change_id(commit.change_id()) ++ " hidden"
  ),
  if(commit.divergent(),
    concat(
      label("divergent", format_short_change_id(commit.change_id()) ++ "??"),
      commit.commit_id().shortest()
    ),
    format_short_change_id(commit.change_id()),
  ),
)
'''

'algmyr_log_compact' = '''
  if(root,
    format_root_commit(self),
    label(
      if(current_working_copy, "working_copy"),
      separate("\n",
        format_short_commit_header(self),
        separate("\n",
          separate(" ",
            format_commit_empty_text(self),
            format_commit_description(self),
          ),
          if(self.contained_in("work"), diff.summary()),
        )
      )
    ),
  )
'''
