[user]
name = "Anton Älgmyr"
email = "anton@algmyr.se"

[git]
push-branch-prefix = "algmyr/push-"

[aliases]
pdiff = ["diff", "--from", "@--"]
pstatus = ["pdiff", "-s"]
editnext = ["edit", "-r", "@+"]
editprev = ["edit", "-r", "@-"]
splice = ["--config-toml", 'ui.merge-editor="splice"']
l = ["log", "-r", "interesting"]
ll = ["l", "--summary"]
xl = ["log", "-r", "xlbase::"]

[revsets]
short-prefixes = "interesting"

[revset-aliases]
"closest(x)" = "(::@&x) ~ ::(::@&x)-"
"furthest(x)" = "x ~ x+::"

"prev_branch()" = "closest(immutable_heads()|branches()|root())"
"gh-pages" = 'ancestors(remote_branches(exact:"gh-pages"))'
"my_trunk" = "latest(trunk() | present(main) | present(master), 1)"
"interesting" = '''
ancestors(
  (mine() ~ present(obsolete)::) ~ ::immutable_heads(),
  2
) | my_trunk | @'''

[template-aliases]
'format_timestamp(timestamp)' = 'timestamp.ago()'
'format_short_change_id(id)' = 'id.shortest()'

[templates]
log_node = '''
coalesce(
  if(self,
    if(root, "┴")
  ),
  builtin_log_node
)
'''
op_log_node = 'builtin_op_log_node'

[ui]
default-revset = "(@ | ancestors(immutable_heads().., 2) | trunk()) ~ gh-pages"
default-command = "l"
log-synthetic-elided-nodes = true
log-word-wrap = true

[merge-tools]
splice.merge-args = ["$base", "$left", "$left", "$right", "$output", "-c", "SpliceInit"]
splice.program = "vim"
splice.merge-tool-edits-conflict-markers = true

[colors]
# { fg = "green", bg = "red", bold = true, underline = true }
"change_id" = "magenta"
"commit_id" = "bright black"
"working_copy change_id" = "bright magenta"
"working_copy commit_id" = "bright black"
"prefix" = { bold=false }
"rest" = "black"

"email" = "yellow"
"username" = "yellow"
"working_copy email" = "bright yellow"
"working_copy username" = "bright yellow"
"timestamp" = "default"
"working_copy timestamp" = "default"

working_copy = { bold = true }

"op_log current_operation" = { bold = true }
"op_log current_operation user" = "bright yellow"
"op_log time"                   = "white"
"op_log current_operation time" = "bright white"
"op_log current_operation description" = { bold = true }
